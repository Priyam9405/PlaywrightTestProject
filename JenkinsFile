pipeline{
agent any
  tools {
       
    }

    environment {
        REPORT_DIR = ""
    }
  
stages {
  stage('Checkout'){
steps{
  echo "Checking out code..."
  checkout scm
    }
    }
  stage('Build & Test') {
    steps {
      echo "Building the project and running tests..."
npm install && npx playwright install --with-deps && npm run webTests

    }
  }
  stage('Publish Test Results'){
steps{
echo "Publishing JUnit test reports..."
  junit '**/target/surefire-reports/*.xml'
  }
  }
  stage('Archiving Artifacts'){
    steps{
echo "Archiving important build artifacts..."
    archiveArtifacts artifacts : '**/target/*.jar', fingerprint:true
    }
}
}
   post {
        always {
            echo "Cleaning up workspace..."
            cleanWs()
        }
        success {
            echo "Build succeeded!"
        }
        failure {
            echo "Build failed!"
        }
    }


}
